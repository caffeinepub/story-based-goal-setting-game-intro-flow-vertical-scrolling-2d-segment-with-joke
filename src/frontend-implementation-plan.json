{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Expand OutroFlow with additional narrative blocks and interactive takeaways popups",
  "requirements": [
    {
      "id": "REQ-11",
      "summary": "Add a third revealed line to the first outro block and gate progression behind a visible Continue button after reveal completes.",
      "acceptanceCriteria": [
        "After game completion, the outro first block displays the existing two lines, then reveals the new third line \"That can't be it...\" using the same timed line-by-line reveal behavior as other outro lines.",
        "A Continue button is shown for the user to advance only after the first block content is revealed (consistent with existing OutroFlow gating).",
        "Clicking Continue transitions to the next outro block with the same animation/styling conventions used elsewhere in OutroFlow."
      ],
      "file_operations": [
        {
          "path": "frontend/src/features/outro/OutroFlow.tsx",
          "operation": "modify",
          "description": "Update OUTRO_BLOCK_1 to include the new third line \"That can't be it...\" and ensure Continue gating remains visible only after the final line is revealed. Continue to use the existing shadcn-ui Button (from '@/components/ui/button') for CTA styling consistency; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-12",
      "summary": "Insert a new second outro block with the provided multi-line narrative revealed line-by-line and gated by Continue.",
      "acceptanceCriteria": [
        "The second block appears only after the user clicks Continue on the first block.",
        "The second block reveals each of the provided lines in order using the same timed line-by-line reveal pattern as the current OutroFlow.",
        "After the final line is revealed, a Continue button is available to advance to the next block.",
        "All text matches the user-provided wording, punctuation, and capitalization exactly."
      ],
      "file_operations": [
        {
          "path": "frontend/src/features/outro/OutroFlow.tsx",
          "operation": "modify",
          "description": "Add a new outro block array containing the exact provided lines (in order) and extend the OutroFlow stage system to run: block-1 → continue → new block-2 reveal → block-2 continue. Keep the same LINE_REVEAL_DELAY timing and the same reveal animation/styling conventions for each line. Use the existing shadcn-ui Button for the block-2 Continue CTA; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-13",
      "summary": "Add a third outro block showing a 7-item clickable takeaways list; clicking an item opens a closable in-app modal with lorem ipsum and a link to https://lmt.lv.",
      "acceptanceCriteria": [
        "After the user clicks Continue on the second block, the 7-item list is shown with each item underlined and the cursor changes to pointer on hover.",
        "Clicking any list item opens a popup/modal (in-app overlay) containing placeholder lorem ipsum text and a clickable link pointing to exactly https://lmt.lv.",
        "The popup/modal can be closed and the user returns to the same list state (no navigation away from the outro).",
        "All 7 list item labels match the user-provided text exactly."
      ],
      "file_operations": [
        {
          "path": "frontend/src/features/outro/TakeawayModal.tsx",
          "operation": "create",
          "description": "Create a focused, reusable outro modal component that renders an in-app overlay with placeholder lorem ipsum content, a clickable link to exactly https://lmt.lv, and a close control. Match existing in-app popup styling patterns already used in the app (overlay, centered card, close via button and Escape). Use existing shadcn-ui Button for the modal close CTA where appropriate; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/features/outro/OutroFlow.tsx",
          "operation": "modify",
          "description": "Extend OutroFlow with a final 'takeaways' stage that renders the 7-item list with underlined labels and pointer cursor. Wire each item click to open TakeawayModal without leaving the outro flow, and ensure closing the modal returns to the same list state."
        }
      ]
    },
    {
      "id": "REQ-14",
      "summary": "Keep the expanded outro integrated into the existing post-game flow and preserve existing OutroFlow styling and transitions without adding new navigation paths.",
      "acceptanceCriteria": [
        "Collecting the 7th unique collectible and closing the final pickup modal still transitions into the outro as it does today.",
        "The expanded outro runs in the new order: (1) first block with added line + Continue, (2) new multi-line block + Continue, (3) clickable takeaways list with popups.",
        "Visual presentation matches existing OutroFlow patterns (same background treatment and CTA button style) and does not regress intro/game visuals."
      ],
      "file_operations": [
        {
          "path": "frontend/src/features/outro/OutroFlow.tsx",
          "operation": "modify",
          "description": "Ensure the updated stage sequence and rendering preserves existing OutroFlow layout (final intro gradient background, typography, line reveal animations, CTA styling) and does not introduce any new routes or navigation. Confirm the outro still mounts via the existing App phase switch (no changes to routing/navigation). Use the existing shadcn-ui Button for CTAs to maintain the established style; verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}